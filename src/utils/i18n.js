// utils/i18n.js
const translations = {
  vi: {
    // Navigation
    home: "Trang chá»§",
    favorites: "YÃªu thÃ­ch",
    history: "Lá»‹ch sá»­",
    cart: "Giá» hÃ ng",
    login: "ÄÄƒng nháº­p",
    
    // HomePage
    heroTitle: "KhÃ¡m phÃ¡ tháº¿ giá»›i kiáº¿n thá»©c",
    heroSubtitle: "Há»c táº­p trá»±c tuyáº¿n vá»›i hÃ ng nghÃ¬n khÃ³a há»c cháº¥t lÆ°á»£ng cao tá»« cÃ¡c chuyÃªn gia hÃ ng Ä‘áº§u",
    getStarted: "Báº¯t Ä‘áº§u ngay",
    exploreMore: "KhÃ¡m phÃ¡ thÃªm",
    featuredCourses: "KhÃ³a há»c ná»•i báº­t",
    categories: "Danh má»¥c",
    viewAll: "Xem táº¥t cáº£",
    
    // Product/Course related
    addToCart: "ThÃªm vÃ o giá» hÃ ng",
    addToFavorites: "ThÃªm vÃ o yÃªu thÃ­ch",
    removeFromFavorites: "XÃ³a khá»i yÃªu thÃ­ch",
    price: "GiÃ¡",
    originalPrice: "GiÃ¡ gá»‘c",
    rating: "ÄÃ¡nh giÃ¡",
    students: "há»c viÃªn",
    instructor: "Giáº£ng viÃªn",
    
    // Cart
    yourCart: "Giá» hÃ ng cá»§a báº¡n",
    emptyCart: "Giá» hÃ ng trá»‘ng",
    emptyCartMessage: "Báº¡n chÆ°a cÃ³ khÃ³a há»c nÃ o trong giá» hÃ ng",
    continueShopping: "Tiáº¿p tá»¥c mua sáº¯m",
    total: "Tá»•ng cá»™ng",
    checkout: "Thanh toÃ¡n",
    remove: "XÃ³a",
    
    // Favorites
    yourFavorites: "KhÃ³a há»c yÃªu thÃ­ch",
    emptyFavorites: "ChÆ°a cÃ³ khÃ³a há»c yÃªu thÃ­ch",
    emptyFavoritesMessage: "Báº¡n chÆ°a thÃªm khÃ³a há»c nÃ o vÃ o danh sÃ¡ch yÃªu thÃ­ch",
    
    // History
    purchaseHistory: "Lá»‹ch sá»­ mua hÃ ng",
    emptyHistory: "ChÆ°a cÃ³ lá»‹ch sá»­ mua hÃ ng",
    emptyHistoryMessage: "Báº¡n chÆ°a mua khÃ³a há»c nÃ o",
    purchaseDate: "NgÃ y mua",
    amount: "Sá»‘ tiá»n",
    
    // Auth
    signIn: "ÄÄƒng nháº­p",
    signUp: "ÄÄƒng kÃ½",
    email: "Email",
    password: "Máº­t kháº©u",
    confirmPassword: "XÃ¡c nháº­n máº­t kháº©u",
    fullName: "Há» vÃ  tÃªn",
    alreadyHaveAccount: "ÄÃ£ cÃ³ tÃ i khoáº£n?",
    dontHaveAccount: "ChÆ°a cÃ³ tÃ i khoáº£n?",
    forgotPassword: "QuÃªn máº­t kháº©u?",
    
    // Footer
    footerDescription: "Ná»n táº£ng há»c táº­p trá»±c tuyáº¿n hÃ ng Ä‘áº§u vá»›i hÃ ng nghÃ¬n khÃ³a há»c cháº¥t lÆ°á»£ng cao tá»« cÃ¡c chuyÃªn gia trong ngÃ nh.",
    quickLinks: "LiÃªn káº¿t nhanh",
    aboutUs: "Vá» chÃºng tÃ´i",
    courses: "KhÃ³a há»c",
    instructors: "Giáº£ng viÃªn",
    blog: "Blog",
    support: "Há»— trá»£",
    privacyPolicy: "ChÃ­nh sÃ¡ch báº£o máº­t",
    termsOfService: "Äiá»u khoáº£n dá»‹ch vá»¥",
    contact: "LiÃªn há»‡",
    faq: "FAQ",
    copyright: "Â© 2025 EduCommerce. Táº¥t cáº£ quyá»n Ä‘Æ°á»£c báº£o lÆ°u.",
    
    // Common
    loading: "Äang táº£i...",
    error: "Lá»—i",
    success: "ThÃ nh cÃ´ng",
    cancel: "Há»§y",
    confirm: "XÃ¡c nháº­n",
    save: "LÆ°u",
    edit: "Chá»‰nh sá»­a",
    delete: "XÃ³a",
    search: "TÃ¬m kiáº¿m",
    filter: "Lá»c",
    sort: "Sáº¯p xáº¿p",
    
    // Categories
    programming: "Láº­p trÃ¬nh",
    design: "Thiáº¿t káº¿",
    business: "Kinh doanh",
    marketing: "Marketing",
    music: "Ã‚m nháº¡c",
    photography: "Nhiáº¿p áº£nh",
    language: "NgÃ´n ngá»¯",
    health: "Sá»©c khá»e"
  },
  
  en: {
    // Navigation
    home: "Home",
    favorites: "Favorites",
    history: "History",
    cart: "Cart",
    login: "Login",
    
    // HomePage
    heroTitle: "Discover the World of Knowledge",
    heroSubtitle: "Learn online with thousands of high-quality courses from industry experts",
    getStarted: "Get Started",
    exploreMore: "Explore More",
    featuredCourses: "Featured Courses",
    categories: "Categories",
    viewAll: "View All",
    
    // Product/Course related
    addToCart: "Add to Cart",
    addToFavorites: "Add to Favorites",
    removeFromFavorites: "Remove from Favorites",
    price: "Price",
    originalPrice: "Original Price",
    rating: "Rating",
    students: "students",
    instructor: "Instructor",
    
    // Cart
    yourCart: "Your Cart",
    emptyCart: "Empty Cart",
    emptyCartMessage: "You don't have any courses in your cart",
    continueShopping: "Continue Shopping",
    total: "Total",
    checkout: "Checkout",
    remove: "Remove",
    
    // Favorites
    yourFavorites: "Your Favorites",
    emptyFavorites: "No Favorite Courses",
    emptyFavoritesMessage: "You haven't added any courses to your favorites",
    
    // History
    purchaseHistory: "Purchase History",
    emptyHistory: "No Purchase History",
    emptyHistoryMessage: "You haven't purchased any courses yet",
    purchaseDate: "Purchase Date",
    amount: "Amount",
    
    // Auth
    signIn: "Sign In",
    signUp: "Sign Up",
    email: "Email",
    password: "Password",
    confirmPassword: "Confirm Password",
    fullName: "Full Name",
    alreadyHaveAccount: "Already have an account?",
    dontHaveAccount: "Don't have an account?",
    forgotPassword: "Forgot Password?",
    
    // Footer
    footerDescription: "Leading online learning platform with thousands of high-quality courses from industry experts.",
    quickLinks: "Quick Links",
    aboutUs: "About Us",
    courses: "Courses",
    instructors: "Instructors",
    blog: "Blog",
    support: "Support",
    privacyPolicy: "Privacy Policy",
    termsOfService: "Terms of Service",
    contact: "Contact",
    faq: "FAQ",
    copyright: "Â© 2025 EduCommerce. All rights reserved.",
    
    // Common
    loading: "Loading...",
    error: "Error",
    success: "Success",
    cancel: "Cancel",
    confirm: "Confirm",
    save: "Save",
    edit: "Edit",
    delete: "Delete",
    search: "Search",
    filter: "Filter",
    sort: "Sort",
    
    // Categories
    programming: "Programming",
    design: "Design",
    business: "Business",
    marketing: "Marketing",
    music: "Music",
    photography: "Photography",
    language: "Language",
    health: "Health"
  }
};

class I18n {
  constructor() {
    this.currentLanguage = this.getStoredLanguage() || 'vi';
    this.listeners = [];
  }

  getStoredLanguage() {
    if (typeof window !== 'undefined') {
      return localStorage.getItem('educommerce_language') || 'vi';
    }
    return 'vi';
  }

  setLanguage(lang) {
    if (translations[lang]) {
      this.currentLanguage = lang;
      if (typeof window !== 'undefined') {
        localStorage.setItem('educommerce_language', lang);
      }
      this.notifyListeners();
    }
  }

  getCurrentLanguage() {
    return this.currentLanguage;
  }

  t(key, defaultValue = key) {
    const keys = key.split('.');
    let value = translations[this.currentLanguage];
    
    for (const k of keys) {
      value = value?.[k];
      if (value === undefined) break;
    }
    
    return value || defaultValue;
  }

  addListener(callback) {
    this.listeners.push(callback);
  }

  removeListener(callback) {
    this.listeners = this.listeners.filter(listener => listener !== callback);
  }

  notifyListeners() {
    this.listeners.forEach(callback => callback(this.currentLanguage));
  }

  getAvailableLanguages() {
    return [
      { code: 'vi', name: 'Tiáº¿ng Viá»‡t', flag: 'ğŸ‡»ğŸ‡³' },
      { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' }
    ];
  }
}

export const i18n = new I18n();
export default i18n;